<?xml version="1.0" encoding="UTF-8" ?>
<Module>
<ModulePrefs title="Group draw text">
    <Require feature="rpc" />
    <Require feature="views" />
</ModulePrefs>
<Content type="html">
<![CDATA[
<!doctype html>
<html>
<head>
</head>
<body>
<script src="//plus.google.com/hangouts/_/api/v1/hangout.js"></script>
<div id="results"></div>
<input type="text" id="input" value="" /><button id="submit">Send</button>
<script>
(function () {

    var app = {

        init: function () {

            console.log('Starting hangout');

            gapi.hangout.data.submitDelta({
                key1: 'first key',
                key2: 'second key'
            });

            gapi.hangout.data.onStateChanged.add(function () {
                var state = gapi.hangout.data.getState();
                console.log(state);
            });

        },

        events: function () {

            var input = document.getElementById('input'),
                btn = document.getElementById('submit'),
                value = '';

            btn.addEvent('onClick', function () {
                console.log('Button pressed');
                value = input.value;

                gapi.hangout.data.submitDelta({
                    inputData: value
                });
            });

        }

    };

    gapi.hangout.onApiReady.add(function (eventObj) {
        if (eventObj.isApiReady) {
            app.init();
        }
    });


}());
</script>
</body>
</html>
]]>
</Content>
</Module>
